# 1. PoC 设计

日期: 2019-03-25

## 状态

2019-03-25 提议

## 背景

### 原型设计

写好现有的组件，通用型接口。如常见的登录接口，。对于使用登录接口的业务来说，它们只关心三部分的内容：

 1. 成功登录。
 2. 取消登录。
 3. 登录失败。对于客户端而言，可以视为取消登录。对于服务端来说，则可能是密码错误、用户名不存在、账号被锁定等。

对应于以上情景，又有一些通用的逻辑处理：

 1. 登录成功。保存 Token，并返回历史页面。
 2. 登录失败。弹出一个自定义内容的提示框。

这些代码是相似的。

#### 前端原型

在一些简单的前端应用里：

 - 模板。只是在使用这些模板，再为这些模板设置相应的属性，绑定对应的值。
 - 数据。其过程都只是在各种保存变量的值，并 CRUD 这些变量的路上。为此，我们需要一个数据处理的管道架构设计，用于处理这些值。
 - 函数。事实上，我们的所有函数都只是一些管理函数，只用于处理这些对应的逻辑。

这些常见的功能都可以做成一些组件，它们对于某些应用来说，代码相应的重复。

 - 无限加载页面。只需要绑定上 API，再控制一下元素的显示与隐藏即可。
 - 表单。定义好字段即类型，对应的前后台逻辑都有了。除此，我们还需要为它们自定义好常见的规则，如正则表达式。而一旦表单之间有联动，那么这个组件的设计就更加麻烦了。
 - 卡片式元素。
 - 表单和表格展示。
 - 常见图表。事实上，已经有一系列的图表工具了，我们只是在它们在基础上，进行了二次封装而已——使得它们可以变成领域语言的形式。
 - 高级的响应式布局。与每个应用独立开发布局不同的是，低代码平台需要提供一套强大的自定义、响应式布局设计——即要满足移动端的通用模式，还要满足桌面版的通用模式。如对于大量数据来说，桌面端使用的是 Pagination，移动端使用的是无限滚动。

#### 后端原型

事实上，对于后端来说，低成本平台意味着，代码生成及服务生成。而服务本身是有限的，既然是业务上发生了一些变化，后端服务也可能并不会发生变化。

它也意味着：

 - 微服务化。每个后端服务要尽可能的小。
 - API 规范化。即采用统一的 API 格式，接受统一的权限管理
 - 大量的 API 服务。
 - 快速集成第三方服务方案。集成第三方服务是开发应用不可避免的情况。为了应对这个问题，我们需要做准备好对应的创建服务逻辑，传入第三方服务所需要的参数，便可以直接生成我们的转发服务。

## 决策

相关决策：

 - 基于开放的标准，准备好一系列的后端 Mock 服务。诸如 Swagger UI，设计相应的接口标准。
 - 前端拖拽设计页面。诸如： https://grapesjs.com/
 - 基于 Flow 的编程工具。诸如： https://noflojs.org/
 - 设计相关的 DSL 原型。
 - 二次封装常用的组件库。

## 后果

在这里记录结果...
